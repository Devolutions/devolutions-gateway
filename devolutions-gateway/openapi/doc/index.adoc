= devolutions-gateway
infos@devolutions.net
2023.2.2
:toc: left
:numbered:
:toclevels: 3
:source-highlighter: highlightjs
:keywords: openapi, rest, devolutions-gateway
:specDir: 
:snippetDir: 
:generator-template: v1 2019-12-20
:info-url: https://openapi-generator.tech
:app-name: devolutions-gateway

[abstract]
.Abstract
Protocol-aware fine-grained relay server


// markup not found, no include::{specDir}intro.adoc[opts=optional]


== Access


* *Bearer* Authentication `jrec_token`



* *Bearer* Authentication `jrl_token`



* *Bearer* Authentication `scope_token`




== Endpoints


[.Config]
=== Config


[.patchConfig]
==== patchConfig

`PATCH /jet/config`

Modifies configuration

===== Description

Modifies configuration


// markup not found, no include::{specDir}jet/config/PATCH/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `scope_token`
| http
| bearer
|===

===== Parameters


====== Body Parameter

[cols="2,3,1,1,1"]
|===
|Name| Description| Required| Default| Pattern

| ConfigPatch
| JSON-encoded configuration patch <<ConfigPatch>>
| X
| 
| 

|===





===== Return Type



-


===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Configuration has been patched with success
|  <<>>


| 400
| Bad patch request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>


| 500
| Failed to patch configuration
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/config/PATCH/implementation.adoc[opts=optional]


endif::internal-generation[]


[.Diagnostics]
=== Diagnostics


[.getClockDiagnostic]
==== getClockDiagnostic

`GET /jet/diagnostics/clock`

Retrieves server's clock in order to diagnose clock drifting.

===== Description

Retrieves server's clock in order to diagnose clock drifting.  This route is not secured by access token. Indeed, this route is used to retrieve server's clock when diagnosing clock drifting. If there is clock drift, token validation will fail because claims such as `nbf` will then be invalid, and thus prevent the clock drift diagnosis.


// markup not found, no include::{specDir}jet/diagnostics/clock/GET/spec.adoc[opts=optional]


===== Security

-


===== Return Type

<<ClockDiagnostic>>


===== Content Type

* application/json

===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Server&#39;s clock
|  <<ClockDiagnostic>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/diagnostics/clock/GET/implementation.adoc[opts=optional]


endif::internal-generation[]


[.getConfigurationDiagnostic]
==== getConfigurationDiagnostic

`GET /jet/diagnostics/configuration`

Retrieves configuration.

===== Description

Retrieves configuration.


// markup not found, no include::{specDir}jet/diagnostics/configuration/GET/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `scope_token`
| http
| bearer
|===


===== Return Type

<<ConfigDiagnostic>>


===== Content Type

* application/json

===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Service configuration diagnostic (including version)
|  <<ConfigDiagnostic>>


| 400
| Bad request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/diagnostics/configuration/GET/implementation.adoc[opts=optional]


endif::internal-generation[]


[.getLogs]
==== getLogs

`GET /jet/diagnostics/logs`

Retrieves latest logs.

===== Description

Retrieves latest logs.


// markup not found, no include::{specDir}jet/diagnostics/logs/GET/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `scope_token`
| http
| bearer
|===


===== Return Type


<<String>>


===== Content Type

* text/plain

===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Latest logs
|  <<String>>


| 400
| Bad request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>


| 500
| Failed to retrieve logs
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/diagnostics/logs/GET/implementation.adoc[opts=optional]


endif::internal-generation[]


[.Health]
=== Health


[.getHealth]
==== getHealth

`GET /jet/health`

Performs a health check

===== Description

Performs a health check


// markup not found, no include::{specDir}jet/health/GET/spec.adoc[opts=optional]


===== Security

-


===== Return Type

<<Identity>>


===== Content Type

* application/json

===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Identity for this Gateway
|  <<Identity>>


| 400
| Invalid Accept header
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/health/GET/implementation.adoc[opts=optional]


endif::internal-generation[]


[.Heartbeat]
=== Heartbeat


[.getHeartbeat]
==== getHeartbeat

`GET /jet/heartbeat`

Performs a heartbeat check

===== Description

Performs a heartbeat check


// markup not found, no include::{specDir}jet/heartbeat/GET/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `scope_token`
| http
| bearer
|===


===== Return Type

<<Heartbeat>>


===== Content Type

* application/json

===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Heartbeat for this Gateway
|  <<Heartbeat>>


| 400
| Bad request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/heartbeat/GET/implementation.adoc[opts=optional]


endif::internal-generation[]


[.Jrec]
=== Jrec


[.listRecordings]
==== listRecordings

`GET /jet/jrec/list`

Lists all recordings stored on this instance

===== Description

Lists all recordings stored on this instance


// markup not found, no include::{specDir}jet/jrec/list/GET/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `scope_token`
| http
| bearer
|===


===== Return Type


<<List>>


===== Content Type

* application/json

===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| List of recordings on this Gateway instance
| List[<<UUID>>] 


| 400
| Bad request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/jrec/list/GET/implementation.adoc[opts=optional]


endif::internal-generation[]


[.pullRecordingFile]
==== pullRecordingFile

`GET /jet/jrec/pull/{id}/{filename}`

Retrieves a recording file for a given session

===== Description

Retrieves a recording file for a given session


// markup not found, no include::{specDir}jet/jrec/pull/\{id\}/\{filename\}/GET/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `jrec_token`
| http
| bearer
|===

===== Parameters

====== Path Parameters

[cols="2,3,1,1,1"]
|===
|Name| Description| Required| Default| Pattern

| id
| Recorded session ID 
| X
| null
| 

| filename
| Name of recording file to retrieve 
| X
| null
| 

|===






===== Return Type


<<File>>


===== Content Type

* application/octet-stream

===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Recording file
|  <<File>>


| 400
| Bad request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>


| 404
| File not found
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/jrec/pull/\{id\}/\{filename\}/GET/implementation.adoc[opts=optional]


endif::internal-generation[]


[.Jrl]
=== Jrl


[.getJrlInfo]
==== getJrlInfo

`GET /jet/jrl/info`

Retrieves current JRL (Json Revocation List) info

===== Description

Retrieves current JRL (Json Revocation List) info


// markup not found, no include::{specDir}jet/jrl/info/GET/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `scope_token`
| http
| bearer
|===


===== Return Type

<<JrlInfo>>


===== Content Type

* application/json

===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Current JRL Info
|  <<JrlInfo>>


| 400
| Bad request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>


| 500
| Failed to update the JRL
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/jrl/info/GET/implementation.adoc[opts=optional]


endif::internal-generation[]


[.updateJrl]
==== updateJrl

`POST /jet/jrl`

Updates JRL (Json Revocation List) using a JRL token

===== Description

Updates JRL (Json Revocation List) using a JRL token


// markup not found, no include::{specDir}jet/jrl/POST/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `jrl_token`
| http
| bearer
|===


===== Return Type



-


===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| JRL updated successfully
|  <<>>


| 400
| Bad request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>


| 500
| Failed to update the JRL
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/jrl/POST/implementation.adoc[opts=optional]


endif::internal-generation[]


[.Sessions]
=== Sessions


[.getSessions]
==== getSessions

`GET /jet/sessions`

Lists running sessions

===== Description

Lists running sessions


// markup not found, no include::{specDir}jet/sessions/GET/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `scope_token`
| http
| bearer
|===


===== Return Type

array[<<SessionInfo>>]


===== Content Type

* application/json

===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Running sessions
| List[<<SessionInfo>>] 


| 400
| Bad request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>


| 500
| Unexpected server error
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/sessions/GET/implementation.adoc[opts=optional]


endif::internal-generation[]


[.terminateSession]
==== terminateSession

`POST /jet/session/{id}/terminate`

Terminate forcefully a running session

===== Description

Terminate forcefully a running session


// markup not found, no include::{specDir}jet/session/\{id\}/terminate/POST/spec.adoc[opts=optional]


===== Security

[cols="2,1,1"]
|===
| Name | Type | Scheme

| `scope_token`
| http
| bearer
|===

===== Parameters

====== Path Parameters

[cols="2,3,1,1,1"]
|===
|Name| Description| Required| Default| Pattern

| id
| Session / association ID of the session to terminate 
| X
| null
| 

|===






===== Return Type



-


===== Responses

.http response codes
[cols="2,3,1"]
|===
| Code | Message | Datatype


| 200
| Session terminated successfully
|  <<>>


| 400
| Bad request
|  <<>>


| 401
| Invalid or missing authorization token
|  <<>>


| 403
| Insufficient permissions
|  <<>>


| 404
| No running session found with provided ID
|  <<>>


| 500
| Unexpected server error
|  <<>>

|===


ifdef::internal-generation[]
===== Implementation

// markup not found, no include::{specDir}jet/session/\{id\}/terminate/POST/implementation.adoc[opts=optional]


endif::internal-generation[]


[#models]
== Models


[#AccessScope]
=== _AccessScope_ 




[cols="1"]
|===
| Allowed values

| `"*"`

| `"gateway.sessions.read"`

| `"gateway.session.terminate"`

| `"gateway.associations.read"`

| `"gateway.diagnostics.read"`

| `"gateway.jrl.read"`

| `"gateway.config.write"`

| `"gateway.heartbeat.read"`

| `"gateway.recordings.read"`
|===


[#ClockDiagnostic]
=== _ClockDiagnostic_ 



[.fields-ClockDiagnostic]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| timestamp_millis
| X
| Long 
| Current time in milliseconds
| int64 

| timestamp_secs
| X
| Long 
| Current time in seconds
| int64 

|===



[#ConfigDiagnostic]
=== _ConfigDiagnostic_ 

Service configuration diagnostic

[.fields-ConfigDiagnostic]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| hostname
| X
| String 
| This Gateway's hostname
|  

| id
| 
| UUID 
| This Gateway's unique ID
| uuid 

| listeners
| X
| List  of <<ListenerUrls>>
| Listeners configured on this instance
|  

| version
| X
| String 
| Gateway service version
|  

|===



[#ConfigPatch]
=== _ConfigPatch_ 



[.fields-ConfigPatch]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| Id
| 
| UUID 
| This Gateway's unique ID
| uuid 

| SubProvisionerPublicKey
| 
| SubProvisionerKey 
| 
|  

| Subscriber
| 
| Subscriber 
| 
|  

|===



[#ConnectionMode]
=== _ConnectionMode_ 




[cols="1"]
|===
| Allowed values

| `"rdv"`

| `"fwd"`
|===


[#DataEncoding]
=== _DataEncoding_ 




[cols="1"]
|===
| Allowed values

| `"Multibase"`

| `"Base64"`

| `"Base64Pad"`

| `"Base64Url"`

| `"Base64UrlPad"`
|===


[#Heartbeat]
=== _Heartbeat_ 



[.fields-Heartbeat]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| hostname
| X
| String 
| This Gateway's hostname
|  

| id
| 
| UUID 
| This Gateway's unique ID
| uuid 

| running_session_count
| X
| Integer 
| Number of running sessions
|  

| version
| X
| String 
| Gateway service version
|  

|===



[#Identity]
=== _Identity_ 



[.fields-Identity]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| hostname
| X
| String 
| This Gateway's hostname
|  

| id
| 
| UUID 
| This Gateway's unique ID
| uuid 

| version
| 
| String 
| Gateway service version
|  

|===



[#JrlInfo]
=== _JrlInfo_ 



[.fields-JrlInfo]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| iat
| X
| Long 
| JWT \"Issued At\" claim of JRL
| int64 

| jti
| X
| UUID 
| Unique ID for current JRL
| uuid 

|===



[#ListenerUrls]
=== _ListenerUrls_ 



[.fields-ListenerUrls]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| external_url
| X
| String 
| URL to use from external networks
|  

| internal_url
| X
| String 
| URL to use on local network
|  

|===



[#PubKeyFormat]
=== _PubKeyFormat_ 




[cols="1"]
|===
| Allowed values

| `"Spki"`

| `"Rsa"`
|===


[#SessionInfo]
=== _SessionInfo_ 

Information about an ongoing Gateway session

[.fields-SessionInfo]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| application_protocol
| X
| String 
| Protocol used during this session
|  

| association_id
| X
| UUID 
| Unique ID for this session
| uuid 

| connection_mode
| X
| ConnectionMode 
| 
|  

| destination_host
| 
| String 
| Destination Host
|  

| filtering_policy
| X
| Boolean 
| Filtering Policy
|  

| recording_policy
| X
| Boolean 
| Recording Policy
|  

| start_timestamp
| X
| Date 
| Date this session was started
| date-time 

| time_to_live
| 
| Long 
| Maximum session duration in minutes (0 is used for the infinite duration)
| int64 

|===



[#SubProvisionerKey]
=== _SubProvisionerKey_ 



[.fields-SubProvisionerKey]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| Encoding
| 
| DataEncoding 
| 
|  

| Format
| 
| PubKeyFormat 
| 
|  

| Id
| X
| String 
| The key ID for this subkey
|  

| Value
| X
| String 
| The binary-to-text-encoded key data
|  

|===



[#Subscriber]
=== _Subscriber_ 

Subscriber configuration

[.fields-Subscriber]
[cols="2,1,2,4,1"]
|===
| Field Name| Required| Type| Description| Format

| Token
| X
| String 
| Bearer token to use when making HTTP requests
|  

| Url
| X
| String 
| HTTP URL where notification messages are to be sent
|  

|===



